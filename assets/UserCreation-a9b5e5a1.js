import{d as a,r as e,b as s,A as r,c as l,e as d,f as o,g as m,w as n,j as t,k as u,l as i,E as p,m as c,n as g,q as w,s as b,v as f,x as v,_}from"./index-9d598a61.js";const V={class:"user-creation-page"},h={class:"creation-container"},y=(a=>(f("data-v-466c7d12"),a=a(),v(),a))((()=>o("div",{class:"creation-header"},[o("h1",{class:"creation-title"},"创建账号"),o("p",{class:"creation-description"},"请输入账号信息和管理员密码")],-1))),P={class:"creation-form"},x=_(a({__name:"UserCreation",setup(a){const f=e(),v=e(!1),_=s({username:"",password:"",name:"",adminPassword:""}),x={username:[{required:!0,message:"请输入账号",trigger:"blur"},{min:3,max:20,message:"账号长度在3到20个字符",trigger:"blur"},{pattern:/^[a-zA-Z0-9_]+$/,message:"账号只能包含字母、数字和下划线",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:20,message:"密码长度在6到20个字符",trigger:"blur"}],name:[{required:!0,message:"请输入姓名",trigger:"blur"},{min:2,max:10,message:"姓名长度在2到10个字符",trigger:"blur"}],adminPassword:[{required:!0,message:"请输入管理员密码",trigger:"blur"}]},U=r((()=>_.username.trim()&&_.password.trim()&&_.name.trim()&&_.adminPassword.trim())),q=async()=>{if(f.value){try{await f.value.validate()}catch(a){return}v.value=!0;try{await i.createUser({username:_.username.trim(),password:_.password,name:_.name.trim(),adminPassword:_.adminPassword});p.success("账号创建成功"),k()}catch(a){p.error("创建失败，请重试")}finally{v.value=!1}}},k=()=>{_.username="",_.password="",_.name="",_.adminPassword="",f.value&&f.value.clearValidate()};return(a,e)=>{const s=c,r=g,i=w,p=b;return l(),d("div",V,[o("div",h,[y,o("div",P,[m(p,{ref_key:"formRef",ref:f,model:_,rules:x,"label-width":"100px",onSubmit:u(q,["prevent"])},{default:n((()=>[m(r,{label:"账号",prop:"username"},{default:n((()=>[m(s,{modelValue:_.username,"onUpdate:modelValue":e[0]||(e[0]=a=>_.username=a),placeholder:"请输入账号",clearable:""},null,8,["modelValue"])])),_:1}),m(r,{label:"密码",prop:"password"},{default:n((()=>[m(s,{modelValue:_.password,"onUpdate:modelValue":e[1]||(e[1]=a=>_.password=a),type:"password",placeholder:"请输入密码","show-password":"",clearable:""},null,8,["modelValue"])])),_:1}),m(r,{label:"姓名",prop:"name"},{default:n((()=>[m(s,{modelValue:_.name,"onUpdate:modelValue":e[2]||(e[2]=a=>_.name=a),placeholder:"请输入姓名",clearable:""},null,8,["modelValue"])])),_:1}),m(r,{label:"管理员密码",prop:"adminPassword"},{default:n((()=>[m(s,{modelValue:_.adminPassword,"onUpdate:modelValue":e[3]||(e[3]=a=>_.adminPassword=a),type:"password",placeholder:"请输入管理员密码","show-password":"",clearable:""},null,8,["modelValue"])])),_:1}),m(r,null,{default:n((()=>[m(i,{type:"primary",onClick:q,loading:v.value,disabled:!U.value},{default:n((()=>[t(" 创建账号 ")])),_:1},8,["loading","disabled"]),m(i,{onClick:k},{default:n((()=>[t(" 重置 ")])),_:1})])),_:1})])),_:1},8,["model"])])])])}}}),[["__scopeId","data-v-466c7d12"]]);export{x as default};
