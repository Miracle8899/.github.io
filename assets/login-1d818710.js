import{d as e,u as a,a as s,r,b as l,o,c as m,e as t,f as d,g as i,w as n,h as u,i as c,j as g,t as p,k as b,l as f,E as v,m as _,n as w,p as y,q as I,s as S,v as h,x,y as V,z as M,_ as z}from"./index-62a62fdc.js";const U=e=>(h("data-v-ebaf4175"),e=e(),x(),e),k={class:"login-container"},q=U((()=>d("div",{class:"bg-decoration"},[d("div",{class:"circle circle-1"}),d("div",{class:"circle circle-2"}),d("div",{class:"circle circle-3"})],-1))),j={class:"login-card"},K=U((()=>d("div",{class:"login-header"},[d("h1",{class:"login-title"},"企飞啦"),d("p",{class:"login-subtitle"},"欢迎回来，开始新的一天")],-1))),B={class:"login-options"},C=z(e({__name:"login",setup(e){const h=a(),x=s(),z=r(),U=r(!1),C=l({username:"",password:"",rememberMe:!1}),E={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:20,message:"用户名长度在 3 到 20 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:20,message:"密码长度在 6 到 20 个字符",trigger:"blur"}]},F=async()=>{if(z.value)try{await z.value.validate(),U.value=!0;const e=await f.LoginByPassword({username:C.username,password:C.password});e&&e.user&&x.setUserInfo(e.user),C.rememberMe?(localStorage.setItem("remembered_username",C.username),localStorage.setItem("remembered_password",C.password),localStorage.setItem("remember_me","true")):(localStorage.removeItem("remembered_username"),localStorage.removeItem("remembered_password"),localStorage.removeItem("remember_me")),v.success("登录成功！"),h.push("/dashboard")}catch(e){}finally{U.value=!1}};return o((()=>{(()=>{if("true"===localStorage.getItem("remember_me")){const e=localStorage.getItem("remembered_username"),a=localStorage.getItem("remembered_password");e&&(C.username=e,C.rememberMe=!0),a&&(C.password=a)}})()})),(e,a)=>{const s=_,r=w,l=y,o=I,f=S;return m(),t("div",k,[q,d("div",j,[K,i(f,{ref_key:"loginFormRef",ref:z,model:C,rules:E,class:"login-form",onSubmit:b(F,["prevent"])},{default:n((()=>[i(r,{prop:"username"},{default:n((()=>[i(s,{modelValue:C.username,"onUpdate:modelValue":a[0]||(a[0]=e=>C.username=e),placeholder:"请输入用户名",size:"large","prefix-icon":u(V),clearable:"",onKeyup:c(F,["enter"])},null,8,["modelValue","prefix-icon"])])),_:1}),i(r,{prop:"password"},{default:n((()=>[i(s,{modelValue:C.password,"onUpdate:modelValue":a[1]||(a[1]=e=>C.password=e),type:"password",placeholder:"请输入密码",size:"large","prefix-icon":u(M),"show-password":"",clearable:"",onKeyup:c(F,["enter"])},null,8,["modelValue","prefix-icon"])])),_:1}),d("div",B,[i(l,{modelValue:C.rememberMe,"onUpdate:modelValue":a[2]||(a[2]=e=>C.rememberMe=e)},{default:n((()=>[g(" 记住我 ")])),_:1},8,["modelValue"])]),i(r,null,{default:n((()=>[i(o,{type:"primary",size:"large",class:"login-button",loading:U.value,onClick:F},{default:n((()=>[g(p(U.value?"登录中...":"登录"),1)])),_:1},8,["loading"])])),_:1})])),_:1},8,["model"])])])}}}),[["__scopeId","data-v-ebaf4175"]]);export{C as default};
