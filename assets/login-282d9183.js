import{d as e,u as a,a as r,r as s,b as l,o,c as m,e as t,f as d,g as n,h as u,w as c,i,j as p,t as g,n as b,k as f,p as _,l as w,_ as y}from"./index-fb5e286d.js";const v={class:"login-container"},I={class:"login-card"},h=(e=>(_("data-v-0001b5ff"),e=e(),w(),e))((()=>n("div",{class:"login-header"},[n("h1",{class:"login-title"},"企飞啦"),n("p",{class:"login-subtitle"},"欢迎回来，开始新的一天")],-1))),S={class:"login-options"},V=y(e({__name:"login",setup(e){const _=a(),w=r(),y=s(!1),V=l({username:"",password:"",rememberMe:!1}),x=async()=>{try{if(!V.username||!V.password)return void b.msg("请输入用户名和密码",{icon:2});y.value=!0;const e=await f.LoginByPassword({username:V.username,password:V.password});e&&e.user&&w.setUserInfo(e.user),V.rememberMe?(localStorage.setItem("remembered_username",V.username),localStorage.setItem("remembered_password",V.password),localStorage.setItem("remember_me","true")):(localStorage.removeItem("remembered_username"),localStorage.removeItem("remembered_password"),localStorage.removeItem("remember_me")),b.msg("登录成功！",{icon:1}),_.push("/dashboard")}catch(e){}finally{y.value=!1}};return o((()=>{(()=>{if("true"===localStorage.getItem("remember_me")){const e=localStorage.getItem("remembered_username"),a=localStorage.getItem("remembered_password");e&&(V.username=e,V.rememberMe=!0),a&&(V.password=a)}})()})),(e,a)=>{const r=m("lay-icon"),s=m("lay-input"),l=m("lay-form-item"),o=m("lay-checkbox"),b=m("lay-button"),f=m("lay-form");return t(),d("div",v,[n("div",I,[h,u(f,{model:V,class:"login-form"},{default:c((()=>[u(l,{label:"用户名",prop:"username"},{default:c((()=>[u(s,{modelValue:V.username,"onUpdate:modelValue":a[0]||(a[0]=e=>V.username=e),placeholder:"请输入用户名","allow-clear":"",onKeyup:i(x,["enter"])},{prefix:c((()=>[u(r,{type:"layui-icon-username"})])),_:1},8,["modelValue"])])),_:1}),u(l,{label:"密码",prop:"password"},{default:c((()=>[u(s,{modelValue:V.password,"onUpdate:modelValue":a[1]||(a[1]=e=>V.password=e),type:"password",placeholder:"请输入密码",password:"","allow-clear":"",onKeyup:i(x,["enter"])},{prefix:c((()=>[u(r,{type:"layui-icon-password"})])),_:1},8,["modelValue"])])),_:1}),n("div",S,[u(o,{modelValue:V.rememberMe,"onUpdate:modelValue":a[2]||(a[2]=e=>V.rememberMe=e),value:"remember"},{default:c((()=>[p(" 记住我 ")])),_:1},8,["modelValue"])]),u(l,null,{default:c((()=>[u(b,{type:"normal",fluid:"",class:"login-button",loading:y.value,onClick:x},{default:c((()=>[p(g(y.value?"登录中...":"登录"),1)])),_:1},8,["loading"])])),_:1})])),_:1},8,["model"])])])}}}),[["__scopeId","data-v-0001b5ff"]]);export{V as default};
